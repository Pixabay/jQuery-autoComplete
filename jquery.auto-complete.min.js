// jQuery autoComplete v1.0.3
// https://github.com/Pixabay/jQuery-autoComplete
(function(a){a.fn.autoComplete=function(c){var b={source:"",minChars:3,delay:100,cache:true,menuClass:"",onSelect:function(e){},renderItem:function(g,e){var f=new RegExp("("+e.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+g+'">'+g.replace(f,"<b>$1</b>")+"</div>"}},d=a.extend(b,c);if(typeof c=="string"){this.each(function(){var e=a(this);if(c=="destroy"){a(window).off("resize.autocomplete",e.fixPosition);e.off("keydown.autocomplete keyup.autocomplete");if(e.data("autocomplete")){e.attr("autocomplete",e.data("autocomplete"))}else{e.removeAttr("autocomplete")}a(e.data("el")).remove();e.removeData("el").removeData("autocomplete")}});return}return this.each(function(){var e=a(this);e.sb=a('<div class="autocomplete-suggestions"></div>').addClass(d.menuClass);e.data("el",e.sb).data("autocomplete",e.attr("autocomplete"));e.attr("autocomplete","off");e.cache={};e.last_val="";e.fixPosition=function(){e.sb.css({top:e.offset().top+e.outerHeight(),left:e.offset().left,width:e.outerWidth()})};setTimeout(e.fixPosition,100);a(window).on("resize.autocomplete",e.fixPosition);e.fixScroll=function(h){e.sb.show();if(!e.sb.maxHeight){e.sb.maxHeight=parseInt(e.sb.css("max-height"))}if(!e.sb.suggestionHeight){e.sb.suggestionHeight=a(".autocomplete-suggestion",e.sb).first().outerHeight()}if(e.sb.suggestionHeight){if(!h){e.sb.scrollTop(0)}else{var g=e.sb.scrollTop(),j=h.offset().top-e.sb.offset().top;if((j+e.sb.suggestionHeight)-e.sb.maxHeight>0){e.sb.scrollTop((j+e.sb.suggestionHeight+g)-e.sb.maxHeight)}else{if(j<0){e.sb.scrollTop(j+g)}}}}};e.sb.appendTo("body");e.sb.on("mouseleave.autocomplete",".autocomplete-suggestion",function(){a(".autocomplete-suggestion.selected").removeClass("selected")});e.sb.on("mouseenter.autocomplete",".autocomplete-suggestion",function(){a(".autocomplete-suggestion.selected").removeClass("selected");a(this).addClass("selected")});e.sb.on("mousedown.autocomplete",".autocomplete-suggestion",function(){var g=a(this).data("val");e.val(g);d.onSelect(g);setTimeout(function(){e.focus()},10)});e.blur(function(g){e.last_val=e.val();e.sb.hide()});function f(h){var j=e.val();e.cache[j]=h;if(h.length&&j.length>=d.minChars){var g="";for(i=0;i<h.length;i++){g+=d.renderItem(h[i],j)}e.sb.html(g).show()}else{e.sb.hide()}}e.on("keydown.autocomplete",function(j){if(j.which==40){var g,h=a(".autocomplete-suggestion.selected",e.sb);if(!h.length){g=a(".autocomplete-suggestion",e.sb).first();e.val(g.addClass("selected").data("val"))}else{g=h.next(".autocomplete-suggestion");if(g.length){h.removeClass("selected");e.val(g.addClass("selected").data("val"))}else{h.removeClass("selected");e.val(e.last_val);g=0}}e.fixScroll(g);return false}else{if(j.which==38){var g,h=a(".autocomplete-suggestion.selected",e.sb);if(!h.length){g=a(".autocomplete-suggestion",e.sb).last();e.val(g.addClass("selected").data("val"))}else{var g=h.prev(".autocomplete-suggestion");if(g.length){h.removeClass("selected");e.val(g.addClass("selected").data("val"))}else{h.removeClass("selected");e.val(e.last_val);g=0}}e.fixScroll(g);return false}else{if(j.which==27){e.val(e.last_val).sb.hide()}}}});e.on("keyup.autocomplete",function(h){if(!~a.inArray(h.which,[27,38,40,37,39])){var j=e.val();if(j.length>=d.minChars){if(j!=e.last_val){e.last_val=j;clearTimeout(e.timer);if(d.cache){if(j in e.cache){f(e.cache[j]);return}for(i=1;i<j.length-d.minChars;i++){var g=j.slice(0,j.length-i);if(g in e.cache&&!e.cache[g].length){f([]);return}}}e.timer=setTimeout(function(){d.source(j,f)},d.delay)}}else{e.last_val=j;e.sb.hide()}}})})}}(jQuery));